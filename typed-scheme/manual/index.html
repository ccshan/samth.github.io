<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>Typed Scheme</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /></head><body><div class="tocset"><div class="tocview"><div class="tocviewtitle"><a href="index.html" class="tocviewlink">Typed Scheme</a></div><div>&nbsp;</div><table class="tocviewlist" cellspacing="0"><tr><td align="right">1<tt>&nbsp;</tt></td><td><a href="index.html#(part :Starting_with_:Typed_:Scheme)" class="tocviewlink">Starting with Typed Scheme</a></td></tr><tr><td align="right">2<tt>&nbsp;</tt></td><td><a href="index.html#(part :Polymorphism)" class="tocviewlink">Polymorphism</a></td></tr><tr><td align="right">3<tt>&nbsp;</tt></td><td><a href="index.html#(part type-ref)" class="tocviewlink">Type Reference</a></td></tr><tr><td align="right">4<tt>&nbsp;</tt></td><td><a href="index.html#(part special-forms)" class="tocviewlink">Special Form Reference</a></td></tr><tr><td align="right">5<tt>&nbsp;</tt></td><td><a href="index.html#(part lang-level)" class="tocviewlink">The Typed Scheme Language Level</a></td></tr></table></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#(part :A_:First_:Function)" class="tocsubseclink">A First Function</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#(part complex)" class="tocsubseclink">Adding more complexity</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#(part :Defining_:New_:Datatypes)" class="tocsubseclink">Defining New Datatypes</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#(part :Recursive_:Datatypes_and_:Unions)" class="tocsubseclink">Recursive Datatypes and Unions</a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#(part :Giving_:Names_to_:Types)" class="tocsubseclink">Giving Names to Types</a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Number</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Boolean)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Boolean</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::String)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">String</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Keyword)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Keyword</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Symbol)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Symbol</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Any)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Any</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Listof)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Listof</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Vectorof7.7)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Vectorof</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Option)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Option</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Pair)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">Pair</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">U</span></span></a></td></tr><tr><td><a href="#(form ::#%kernel::case-lambda)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">case-lambda</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::All5.5)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">All</span></span></a></td></tr><tr><td><a href="#(form ::#%kernel::values)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">values</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss::mu3.3)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">mu</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#(part :Binding_:Forms)" class="tocsubseclink">Binding Forms</a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">define:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::pdefine::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">pdefine:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">let:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::letrec::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">letrec:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let*::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">let*:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::lambda::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">lambda:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::plambda::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">plambda:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::case-lambda::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">case-lambda:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::pcase-lambda::)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">pcase-lambda:<span class="mywbr"> </span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#(part :Structure_:Definitions)" class="tocsubseclink">Structure Definitions</a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">define-typed-struct</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/../:C:S:U660/datatype.ss::define-type)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">define-type</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#(part :Type_:Aliases)" class="tocsubseclink">Type Aliases</a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">define-type-alias</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#(part :Type_:Annotation)" class="tocsubseclink">Type Annotation</a></td></tr><tr><td><span class="tocsublinknumber">4.5<tt>&nbsp;</tt></span><a href="#(part :Require)" class="tocsubseclink">Require</a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/typed)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">require/<span class="mywbr"> </span>typed</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/opaque-type)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">require/<span class="mywbr"> </span>opaque-type</span></span></a></td></tr><tr><td><a href="#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require-typed-struct)" class="tocsublink"><span class="schemesymbol"><span class="schemesyntaxlink">require-typed-struct</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part top)"></a><a name="(part typed-scheme)"></a>Typed Scheme</h2><p>Typed Scheme is a Scheme-like language, with a type system that
supports common Scheme programming idioms.  Explicit type declarations
are required  &ndash;  that is, there is no type inference.  The language
supports a number of features from previous work on type systems that
make it easier to type Scheme programs, as well as a novel idea dubbed
<i>occurrence typing</i> for case discrimination.</p><p>Typed Scheme is also designed to integrate with the rest of your PLT
Scheme system.  It is possible to convert a single module to Typed
Scheme, while leaving the rest of the program unchanged.  The typed
module is protected from the untyped code base via
automatically-synthesized contracts.</p><p>Further information on Typed Scheme is available from
<a href="http://www.ccs.neu.edu/home/samth/typed-scheme.html">the homepage</a>.</p><p><b>Installation</b></p><p>There is no need to specifically install Typed Scheme.  Simply running
one of the example programs described in this manual will
automatically download and install the necessary software.  However,
it can also be installed from the MzScheme or DrScheme prompt with the
following require statement:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/require.html#(form ::(collects . scheme/private/reqprov.ss)::require)" class="schemesyntaxlink">require</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/require.html#(form ::(collects . scheme/private/reqprov.ss)::planet)" class="schemesyntaxlink">planet</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.ss"</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevalue">"plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p><p>In order to use the Typed Scheme language level in DrScheme, DrScheme
must be restarted after installation.</p><h3>1<tt>&nbsp;</tt><a name="(part :Starting_with_:Typed_:Scheme)"></a>Starting with Typed Scheme</h3><p>If you already know PLT Scheme, or even some other Scheme, it should be
easy to start using Typed Scheme.</p><h4>1.1<tt>&nbsp;</tt><a name="(part :A_:First_:Function)"></a>A First Function</h4><p>The following program defines the Fibonacci function in PLT Scheme:</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemesymbol">mzscheme</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/define.html#(form ::(collects . scheme/private/kw.ss)::new-define)" class="schemesyntaxlink">define</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">0</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::else)" class="schemesyntaxlink">else</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::+)" class="schemevaluelink">+</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::-)" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::-)" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>This program defines the same program using Typed Scheme.</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/require.html#(form ::(collects . scheme/private/reqprov.ss)::planet)" class="schemesyntaxlink">planet</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.ss"</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevalue">"plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">0</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::else)" class="schemesyntaxlink">else</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::+)" class="schemevaluelink">+</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::-)" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::-)" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>There are three differences between these programs:</p><ul><li><p><b>The Language: </b><span class="schemesymbol">mzscheme</span> has been replaced by <span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/require.html#(form ::(collects . scheme/private/reqprov.ss)::planet)" class="schemesyntaxlink">planet</a></span><tt> </tt><span class="schemevalue">"typed-scheme.ss"</span><tt> </tt><span class="schemeparen">(</span><span class="schemevalue">"plt"</span><tt> </tt><span class="schemevalue">"typed-scheme.plt"</span><tt> </tt><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span>.</p></li><li><p><b>The Binding Form: </b><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/define.html#(form ::(collects . scheme/private/kw.ss)::new-define)" class="schemesyntaxlink">define</a></span> has been replaced
by <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span> as the top-level definition form.</p></li><li><p><b>The Type Annotations: </b>Both the argument <span class="schemesymbol">n</span>
and the result (appearing after the arguments) have been annotated
with types, in this case <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span>.</p></li></ul><p>In general, these are most of the changes that have to be made to a
PLT Scheme program to transform it into a Typed Scheme program.</p><p class="refpara"><span class="refcolumn"><span class="refcontent">Changes to uses of <span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/require.html#(form ::(collects . scheme/private/reqprov.ss)::require)" class="schemesyntaxlink">require</a></span> may also be necessary
- these are described later.</span></span></p><h4>1.2<tt>&nbsp;</tt><a name="(part complex)"></a>Adding more complexity</h4><p>Other typed binding forms are also available.  For example, we could have
rewritten our fibonacci program as follows:</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemesymbol">tlang</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let::)" class="schemesyntaxlink">let:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemesymbol">base?</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Boolean)" class="schemesyntaxlink">Boolean</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/qq-and-or.ss)::or)" class="schemesyntaxlink">or</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">0</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::#%kernel::if)" class="schemesyntaxlink">if</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">base?</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::+)" class="schemevaluelink">+</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::-)" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">fib</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::-)" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>This program uses the <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let::)" class="schemesyntaxlink">let:</a></span> binding form, which, like
<span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span>, allows types to be provided, as well as the
<span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Boolean)" class="schemesyntaxlink">Boolean</a></span> type.</p><p>We can also define mutually-recursive functions:</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">even-odd</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/require.html#(form ::(collects . scheme/private/reqprov.ss)::planet)" class="schemesyntaxlink">planet</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.ss"</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevalue">"plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">my-odd?</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Boolean)" class="schemesyntaxlink">Boolean</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::#%kernel::if)" class="schemesyntaxlink">if</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">0</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">#f</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">my-even?</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::-)" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">my-even?</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Boolean)" class="schemesyntaxlink">Boolean</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::#%kernel::if)" class="schemesyntaxlink">if</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">0</span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">#t</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">my-odd?</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::-)" class="schemevaluelink">-</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">n</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/Writing.html#(def ::#%kernel::display)" class="schemevaluelink">display</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">my-even?</span><span class="hspace">&nbsp;</span><span class="schemevalue">12</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>As expected, this program prints <span class="schemeresult">#t</span>.</p><h4>1.3<tt>&nbsp;</tt><a name="(part :Defining_:New_:Datatypes)"></a>Defining New Datatypes</h4><p>If our program requires anything more than atomic data, we must define
new datatypes.  In Typed Scheme, structures can be defined, similarly
to PLT Scheme structures.  The following program defines a date
structure and a function that formats a date as a string, using PLT
Scheme&rsquo;s built-in <span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/Writing.html#(def ::#%kernel::format)" class="schemevaluelink">format</a></span> function.</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/time.html#(def ::#%kernel::date)" class="schemevaluelink">date</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/require.html#(form ::(collects . scheme/private/reqprov.ss)::planet)" class="schemesyntaxlink">planet</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.ss"</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevalue">"plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">my-date</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemesymbol">day</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">month</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::String)" class="schemesyntaxlink">String</a></span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">year</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">format-date</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">d</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol">my-date</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::String)" class="schemesyntaxlink">String</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/Writing.html#(def ::#%kernel::format)" class="schemevaluelink">format</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"Today is day ~a of ~a in the year ~a"</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">my-date-day</span><span class="hspace">&nbsp;</span><span class="schemesymbol">d</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">my-date-month</span><span class="hspace">&nbsp;</span><span class="schemesymbol">d</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">my-date-year</span><span class="hspace">&nbsp;</span><span class="schemesymbol">d</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/Writing.html#(def ::#%kernel::display)" class="schemevaluelink">display</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">format-date</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">make-my-date</span><span class="hspace">&nbsp;</span><span class="schemevalue">28</span><span class="hspace">&nbsp;</span><span class="schemevalue">"November"</span><span class="hspace">&nbsp;</span><span class="schemevalue">2006</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>Here we see the new built-in type <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::String)" class="schemesyntaxlink">String</a></span> as well as a definition
of the new user-defined type <span class="schemesymbol">my-date</span>.  To define
<span class="schemesymbol">my-date</span>, we provide all the information usually found in a
<span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/structures.html#(form ::(collects . scheme/private/define-struct.ss)::define-struct*)" class="schemesyntaxlink">define-struct</a></span>, but added type annotations to the fields using
the <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span> form.
Then we can use the functions that this declaration creates, just as
we would have with <span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/structures.html#(form ::(collects . scheme/private/define-struct.ss)::define-struct*)" class="schemesyntaxlink">define-struct</a></span>.</p><h4>1.4<tt>&nbsp;</tt><a name="(part :Recursive_:Datatypes_and_:Unions)"></a>Recursive Datatypes and Unions</h4><p>Many data structures involve multiple variants.  In Typed Scheme, we
represent these using <i>union types</i>, written <span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><tt> </tt><span class="schemesymbol">t1</span><tt> </tt><span class="schemesymbol">t2</span><tt> </tt><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/Pattern-Based_Syntax_Matching.html#(form ::(collects . scheme/private/ellipses.ss)::...)" class="schemesyntaxlink">...</a></span><span class="schemeparen">)</span>.</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">tree</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/require.html#(form ::(collects . scheme/private/reqprov.ss)::planet)" class="schemesyntaxlink">planet</a></span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.ss"</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevalue">"plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-scheme.plt"</span><span class="hspace">&nbsp;</span><span class="schemevalue">2</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemesymbol">val</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemesymbol">left</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">right</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-height</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">t</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol">leaf?</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::else)" class="schemesyntaxlink">else</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::max)" class="schemevaluelink">max</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-height</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">node-left</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-height</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">node-right</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-sum</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">t</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol">leaf?</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">leaf-val</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::else)" class="schemesyntaxlink">else</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::+)" class="schemevaluelink">+</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-sum</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">node-left</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-sum</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">node-right</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>In this module, we have defined two new datatypes: <span class="schemesymbol">leaf</span> and
<span class="schemesymbol">node</span>.  We&rsquo;ve also used the type <span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><tt> </tt><span class="schemesymbol">node</span><tt> </tt><span class="schemesymbol">leaf</span><span class="schemeparen">)</span>,
which represents a binary tree of numbers.  In essence, we are saying
that the <span class="schemesymbol">tree-height</span> function accepts either a <span class="schemesymbol">node</span>
or a <span class="schemesymbol">leaf</span> and produces a number.</p><p>In order to calculate interesting facts about trees, we have to take
them apart and get at their contents.  But since accessors such as
<span class="schemesymbol">node-left</span> require a <span class="schemesymbol">node</span> as input, not a
<span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><tt> </tt><span class="schemesymbol">node</span><tt> </tt><span class="schemesymbol">leaf</span><span class="schemeparen">)</span>, we have to determine which kind of input we
were passed.</p><p>For this purpose, we use the predicates that come with each defined
structure.  For example, the <span class="schemesymbol">leaf?</span> predicate distinguishes
<span class="schemesymbol">leaf</span>s from all other Typed Scheme values.  Therefore, in the
first branch of the <span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span> clause in <span class="schemesymbol">tree-sum</span>, we know
that <span class="schemesymbol">t</span> is a <span class="schemesymbol">leaf</span>, and therefore we can get its value
with the <span class="schemesymbol">leaf-val</span> function.</p><p>In the else clauses of both functions, we know that <span class="schemesymbol">t</span> is not
a <span class="schemesymbol">leaf</span>, and since the type of <span class="schemesymbol">t</span> was <span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><tt> </tt><span class="schemesymbol">node</span><tt> </tt><span class="schemesymbol">leaf</span><span class="schemeparen">)</span> by process of elimination we can determine that <span class="schemesymbol">t</span> must
be a <span class="schemesymbol">node</span>.  Therefore, we can use accessors such as
<span class="schemesymbol">node-left</span> and <span class="schemesymbol">node-right</span> with <span class="schemesymbol">t</span> as input.</p><h4>1.5<tt>&nbsp;</tt><a name="(part :Giving_:Names_to_:Types)"></a>Giving Names to Types</h4><p>When a complex type is used repeatedly in a program, it can be helpful
to give it a short name.  In Typed Scheme, this can be done with
<i>type aliases</i>.  For example, we could have used a type alias
to represent our tree datatype from the previous section.</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">tree</span><span class="hspace">&nbsp;</span><span class="schemesymbol">tlang</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemesymbol">val</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemesymbol">left</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">right</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)" class="schemesyntaxlink">define-type-alias</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">tree</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">node</span><span class="hspace">&nbsp;</span><span class="schemesymbol">leaf</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-height</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">t</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol">tree</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol">leaf?</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">1</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::else)" class="schemesyntaxlink">else</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::max)" class="schemevaluelink">max</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-height</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">node-left</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-height</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">node-right</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-sum</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">t</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol">tree</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol">leaf?</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">leaf-val</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::else)" class="schemesyntaxlink">else</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::+)" class="schemevaluelink">+</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-sum</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">node-left</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">tree-sum</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">node-right</span><span class="hspace">&nbsp;</span><span class="schemesymbol">t</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>The defintion <span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)" class="schemesyntaxlink">define-type-alias</a></span><tt> </tt><span class="schemesymbol">tree</span><tt> </tt><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><tt> </tt><span class="schemesymbol">node</span><tt> </tt><span class="schemesymbol">leaf</span><span class="schemeparen">)</span><span class="schemeparen">)</span> creates
the type alias <span class="schemesymbol">tree</span>, which is just another name for the type
<span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><tt> </tt><span class="schemesymbol">node</span><tt> </tt><span class="schemesymbol">leaf</span><span class="schemeparen">)</span>.  We can then use this type in subsequent
definitions such as <span class="schemesymbol">tree-sum</span>.</p><h3>2<tt>&nbsp;</tt><a name="(part :Polymorphism)"></a>Polymorphism</h3><p>Virtually every Scheme program uses lists and sexpressions.  Fortunately, Typed
Scheme can handle these as well.  A simple list processing program can be
written like this:</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">add-list</span><span class="hspace">&nbsp;</span><span class="schemesymbol">tlang</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">sum-list</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">l</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Listof)" class="schemesyntaxlink">Listof</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/pairs.html#(def ::#%kernel::null?)" class="schemevaluelink">null?</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">l</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevalue">0</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::else)" class="schemesyntaxlink">else</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::+)" class="schemevaluelink">+</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/pairs.html#(def ::#%kernel::car)" class="schemevaluelink">car</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">l</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">sum-list</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/pairs.html#(def ::#%kernel::cdr)" class="schemevaluelink">cdr</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">l</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>This looks similar to our earlier programs  &ndash;  except for the type
of <span class="schemesymbol">l</span>, which looks like a function application.  In fact, it&rsquo;s
a use of the <i>type constructor</i> <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Listof)" class="schemesyntaxlink">Listof</a></span>, which takes
another type as its input, here <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span>.  We can use
<span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Listof)" class="schemesyntaxlink">Listof</a></span> to construct the type of any kind of list we might
want.</p><p>We can define our own type constructors as well.  For example, here is
an analog of the <tt>Maybe</tt> type constructor from Haskell:</p><p><table cellspacing="0" class="schemeblock"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/module.html#(form ::#%kernel::module)" class="schemesyntaxlink">module</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">maybe</span><span class="hspace">&nbsp;</span><span class="schemevalue">"typed-lang.ss"</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">Nothing</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">a</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">Just</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemesymbol">v</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol">a</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)" class="schemesyntaxlink">define-type-alias</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">Maybe</span><span class="hspace">&nbsp;</span><span class="schemesymbol">a</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">Nothing</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">Just</span><span class="hspace">&nbsp;</span><span class="schemesymbol">a</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">find</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">v</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol">l</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Listof)" class="schemesyntaxlink">Listof</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">Maybe</span><span class="hspace">&nbsp;</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::cond)" class="schemesyntaxlink">cond</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/pairs.html#(def ::#%kernel::null?)" class="schemevaluelink">null?</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">l</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">make-Nothing</span><span class="schemeparen">)</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/numbers.html#(def ::#%kernel::=)" class="schemevaluelink">=</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">v</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/pairs.html#(def ::#%kernel::car)" class="schemevaluelink">car</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">l</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">make-Just</span><span class="hspace">&nbsp;</span><span class="schemesymbol">v</span><span class="schemeparen">)</span><span class="schemeparen">]</span></p></td></tr><tr><td><p><span class="schemeplain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemeparen">[</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/if.html#(form ::(collects . scheme/private/cond.ss)::else)" class="schemesyntaxlink">else</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">find</span><span class="hspace">&nbsp;</span><span class="schemesymbol">v</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/pairs.html#(def ::#%kernel::cdr)" class="schemevaluelink">cdr</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">l</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p>The first <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span> defines <span class="schemesymbol">Nothing</span> to be
a structure with no contents.</p><p>The second definition</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">a</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemesymbol">Just</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemesymbol">v</span><span class="hspace">&nbsp;</span><span class="schemesymbol">:</span><span class="hspace">&nbsp;</span><span class="schemesymbol">a</span><span class="schemeparen">]</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p><p>creates a parameterized type, <span class="schemesymbol">Just</span>, which is a structure with
one element, whose type is that of the type argument to
<span class="schemesymbol">Just</span>.  Here the type parameters (only one, <span class="schemesymbol">a</span>, in
this case) are written before the type name, and can be referred to in
the types of the fields.</p><p>The type alias definiton</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)" class="schemesyntaxlink">define-type-alias</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">Maybe</span><span class="hspace">&nbsp;</span><span class="schemesymbol">a</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemesymbol">Nothing</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">Just</span><span class="hspace">&nbsp;</span><span class="schemesymbol">a</span><span class="schemeparen">)</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p><p>creates a parameterized alias  &ndash;  <span class="schemesymbol">Maybe</span> is a potential
container for whatever type is supplied.</p><p>The <span class="schemesymbol">find</span> function takes a number <span class="schemesymbol">v</span> and list, and
produces <span class="schemeparen">(</span><span class="schemesymbol">make-Just</span><tt> </tt><span class="schemesymbol">v</span><span class="schemeparen">)</span> when the number is found in the list,
and <span class="schemeparen">(</span><span class="schemesymbol">make-Nothing</span><span class="schemeparen">)</span> otherwise.  Therefore, it produces a
<span class="schemeparen">(</span><span class="schemesymbol">Maybe</span><tt> </tt><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span><span class="schemeparen">)</span>, just as the annotation specified.</p><h3>3<tt>&nbsp;</tt><a name="(part type-ref)"></a>Type Reference</h3><p><b>Base Types</b></p><p>These types represent primitive Scheme data.</p><p><table cellspacing="0" class="boxed"><tr><td><p><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Number)" class="schemesyntaxlink">Number</a></span></p></td></tr></table></p><p>Any number</p><p><table cellspacing="0" class="boxed"><tr><td><p><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Boolean)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Boolean)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Boolean)" class="schemesyntaxlink">Boolean</a></span></p></td></tr></table></p><p>Either <span class="schemevalue">#t</span> or <span class="schemevalue">#f</span></p><p><table cellspacing="0" class="boxed"><tr><td><p><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::String)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::String)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::String)" class="schemesyntaxlink">String</a></span></p></td></tr></table></p><p>A string</p><p><table cellspacing="0" class="boxed"><tr><td><p><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Keyword)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Keyword)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Keyword)" class="schemesyntaxlink">Keyword</a></span></p></td></tr></table></p><p>A PLT Scheme literal keyword</p><p><table cellspacing="0" class="boxed"><tr><td><p><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Symbol)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Symbol)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Symbol)" class="schemesyntaxlink">Symbol</a></span></p></td></tr></table></p><p>A symbol</p><p><table cellspacing="0" class="boxed"><tr><td><p><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Any)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Any)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Any)" class="schemesyntaxlink">Any</a></span></p></td></tr></table></p><p>Any value</p><p><b>Type Constructors</b></p><p>The following constructors are parameteric in their type arguments.</p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Listof)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Listof)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Listof)" class="schemesyntaxlink">Listof</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span></p></td></tr></table></p><p>Homogenous lists of <span class="schemevariable">t</span></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Vectorof7.7)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Vectorof7.7)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Vectorof7.7)" class="schemesyntaxlink">Vectorof</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span></p></td></tr></table></p><p>Homogenous vectors of <span class="schemevariable">t</span></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Option)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Option)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Option)" class="schemesyntaxlink">Option</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span></p></td></tr></table></p><p>Either <span class="schemevariable">t</span> of <span class="schemevalue">#f</span></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Pair)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Pair)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::Pair)" class="schemesyntaxlink">Pair</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">s</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span></p></td></tr></table></p><p>is the pair containing <span class="schemesymbol">s</span> as the <span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/pairs.html#(def ::#%kernel::car)" class="schemevaluelink">car</a></span>
and <span class="schemesymbol">t</span> as the <span class="schemesymbol"><a href="../../../../../sw/plt4/doc/reference/pairs.html#(def ::#%kernel::cdr)" class="schemevaluelink">cdr</a></span></p><blockquote class="leftindent"><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><span class="schemevariable">dom</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="hspace">&nbsp;</span><span class="schemevariable">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemevariable">rng</span><span class="schemeparen">)</span></p></td></tr></table><p>is the type of functions from the (possibly-empty)
sequence <span class="schemevariable">dom</span><tt> </tt><span class="schememeta"><a href="../../../../../sw/plt4/doc/reference/Pattern-Based_Syntax_Matching.html#(form ::(collects . scheme/private/ellipses.ss)::...)" class="schemesyntaxlink">...</a></span> to the <span class="schemesymbol">rng</span> type.</p></blockquote><blockquote class="leftindent"><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><span class="schemevariable">dom</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="hspace">&nbsp;</span><span class="schemevariable">rst</span><span class="hspace">&nbsp;</span><span class="schemevariable">..</span><span class="hspace">&nbsp;</span><span class="schemevariable">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemevariable">rng</span><span class="schemeparen">)</span></p></td></tr></table><p>is the type of functions from the (possibly-empty)
sequence <span class="schemevariable">dom</span><tt> </tt><span class="schememeta"><a href="../../../../../sw/plt4/doc/reference/Pattern-Based_Syntax_Matching.html#(form ::(collects . scheme/private/ellipses.ss)::...)" class="schemesyntaxlink">...</a></span> to the <span class="schemevariable">rng</span> type with an optional trailing
sequence of <span class="schemevariable">rst</span> type. Note: <span class="schemevariable">..</span> is a
part of the syntax of these types.</p></blockquote><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::U2.2)" class="schemesyntaxlink">U</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></p></td></tr></table></p><p>is the union of the types <span class="schemevariable">t</span><tt> </tt><span class="schememeta"><a href="../../../../../sw/plt4/doc/reference/Pattern-Based_Syntax_Matching.html#(form ::(collects . scheme/private/ellipses.ss)::...)" class="schemesyntaxlink">...</a></span></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::#%kernel::case-lambda)"></a><a name="(form ::#%kernel::case-lambda)"></a><span class="schemesymbol"><a href="index.html#(form ::#%kernel::case-lambda)" class="schemesyntaxlink">case-lambda</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">fun-ty</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></p></td></tr></table></p><p>is a function that behaves like all of
the <span class="schemevariable">fun-ty</span>s.  The <span class="schemevariable">fun-ty</span>s must all be function
types constructed with <span class="schemesymbol"><font class="badlink"><span class="schemevaluelink">-&gt;</span></font></span>.</p><blockquote class="leftindent"><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">t1</span><span class="hspace">&nbsp;</span><span class="schemevariable">t2</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></p></td></tr></table><p>is the instantiation of the parametric type
<span class="schemevariable">t</span> at types <span class="schemevariable">t1</span><tt> </tt><span class="schemevariable">t2</span><tt> </tt><span class="schememeta"><a href="../../../../../sw/plt4/doc/reference/Pattern-Based_Syntax_Matching.html#(form ::(collects . scheme/private/ellipses.ss)::...)" class="schemesyntaxlink">...</a></span></p></blockquote><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::All5.5)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::All5.5)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss:::All5.5)" class="schemesyntaxlink">All</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span></p></td></tr></table></p><p>is a parameterization of type <span class="schemevariable">t</span>, with
type variables <span class="schemevariable">v</span><tt> </tt><span class="schememeta"><a href="../../../../../sw/plt4/doc/reference/Pattern-Based_Syntax_Matching.html#(form ::(collects . scheme/private/ellipses.ss)::...)" class="schemesyntaxlink">...</a></span></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::#%kernel::values)"></a><a name="(form ::#%kernel::values)"></a><span class="schemesymbol"><a href="index.html#(form ::#%kernel::values)" class="schemesyntaxlink">values</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></p></td></tr></table></p><p>is the type of a sequence of multiple values, with
types <span class="schemevariable">t</span><tt> </tt><span class="schememeta"><a href="../../../../../sw/plt4/doc/reference/Pattern-Based_Syntax_Matching.html#(form ::(collects . scheme/private/ellipses.ss)::...)" class="schemesyntaxlink">...</a></span>.  This can only appear as the return type of a
function.</p><blockquote class="leftindent"><table cellspacing="0" class="boxed"><tr><td><p><span class="schemevariable">v</span></p></td></tr></table><p>where <span class="schemesymbol">v</span> is a number, boolean or string, is the singleton type containing
only that value</p></blockquote><blockquote class="leftindent"><table cellspacing="0" class="boxed"><tr><td><p><span class="schemevariable">i</span></p></td></tr></table><p>where <span class="schemevariable">i</span> is an identifier can be a reference to a type
name or a type variable</p></blockquote><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/base-env.ss::mu3.3)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss::mu3.3)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/base-env.ss::mu3.3)" class="schemesyntaxlink">mu</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">n</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span></p></td></tr></table></p><p>is a recursive type where <span class="schemevariable">n</span> is bound to the
recursive type in the body <span class="schemevariable">t</span></p><p>Other types cannot be written by the programmer, but are used
internally and may appear in error messages.</p><blockquote class="leftindent"><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><span class="schemevariable">struct:n</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table><p>is the type of structures named
<span class="schemevariable">n</span> with field types <span class="schemevariable">t</span>.  There may be multiple such
types with the same printed representation.</p></blockquote><blockquote class="leftindent"><table cellspacing="0" class="boxed"><tr><td><p><span class="schemevariable">&lt;n&gt;</span></p></td></tr></table><p>is the printed representation of a reference to the
type variable <span class="schemevariable">n</span></p></blockquote><h3>4<tt>&nbsp;</tt><a name="(part special-forms)"></a>Special Form Reference</h3><p>Typed Scheme provides a variety of special forms above and beyond
those in PLT Scheme.  They are used for annotating variables with types,
creating new types, and annotating expressions.</p><h4>4.1<tt>&nbsp;</tt><a name="(part :Binding_:Forms)"></a>Binding Forms</h4><p><span class="schemevariable">loop</span>, <span class="schemevariable">f</span>, <span class="schemevariable">a</span>, and <span class="schemevariable">v</span> are names, <span class="schemevariable">t</span> is a type.
 <span class="schemevariable">e</span> is an expression and <span class="schemevariable">body</span> is a block.</p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">f</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define::)" class="schemesyntaxlink">define:</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">e</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::pdefine::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::pdefine::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::pdefine::)" class="schemesyntaxlink">pdefine:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">a</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">f</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let::)" class="schemesyntaxlink">let:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">e</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let::)" class="schemesyntaxlink">let:</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">loop</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t0</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">e</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr></table></p><p>where <span class="schemevariable">t0</span> is the type of the
result of <span class="schemevariable">loop</span> (and thus the result of the entire expression).</p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::letrec::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::letrec::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::letrec::)" class="schemesyntaxlink">letrec:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">e</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let*::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let*::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::let*::)" class="schemesyntaxlink">let*:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">e</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::lambda::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::lambda::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::lambda::)" class="schemesyntaxlink">lambda:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::lambda::)" class="schemesyntaxlink">lambda:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::plambda::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::plambda::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::plambda::)" class="schemesyntaxlink">plambda:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">a</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::plambda::)" class="schemesyntaxlink">plambda:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">a</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::case-lambda::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::case-lambda::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::case-lambda::)" class="schemesyntaxlink">case-lambda:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemevariable">formals</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></p></td></tr></table></p><p>where <span class="schemevariable">formals</span> is like
the second element of a <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::lambda::)" class="schemesyntaxlink">lambda:</a></span></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::pcase-lambda::)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::pcase-lambda::)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::pcase-lambda::)" class="schemesyntaxlink">pcase-lambda:</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">a</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemevariable">formals</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></p></td></tr></table></p><p>where <span class="schemevariable">formals</span> is like
the third element of a <span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::plambda::)" class="schemesyntaxlink">plambda:</a></span></p><h4>4.2<tt>&nbsp;</tt><a name="(part :Structure_:Definitions)"></a>Structure Definitions</h4><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">f</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">parent</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">f</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">f</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-typed-struct)" class="schemesyntaxlink">define-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">parent</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">f</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/../:C:S:U660/datatype.ss::define-type)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/../:C:S:U660/datatype.ss::define-type)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/../:C:S:U660/datatype.ss::define-type)" class="schemesyntaxlink">define-type</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemevariable">variant</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">f</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></p></td></tr></table></p><h4>4.3<tt>&nbsp;</tt><a name="(part :Type_:Aliases)"></a>Type Aliases</h4><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)" class="schemesyntaxlink">define-type-alias</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::define-type-alias)" class="schemesyntaxlink">define-type-alias</a></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemevariable">v</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">)</span></p></td></tr></table></p><h4>4.4<tt>&nbsp;</tt><a name="(part :Type_:Annotation)"></a>Type Annotation</h4><p>These annotations require the use of the following declaration before
the beginning of the module:</p><p><span class="schemeinputbg"><span class="hspace"></span><span class="schemeinput">#reader (planet "typed-reader.ss" ("plt" "typed-scheme.plt" 2))</span><span class="hspace"></span></span></p><p>This will not affect the reading or parsing of any other syntax.</p><p><span class="schemeinputbg"><span class="hspace"></span><span class="schemeinput">#{v : t}</span><span class="hspace"></span></span> This is legal only for binding occurences of <span class="schemevariable">v</span>.</p><p><span class="schemeinputbg"><span class="hspace"></span><span class="schemeinput">#{e :: t}</span><span class="hspace"></span></span> This is legal only in expression contexts.</p><h4>4.5<tt>&nbsp;</tt><a name="(part :Require)"></a>Require</h4><p>Here, <span class="schemevariable">m</span> is a module spec, <span class="schemevariable">pred</span> is an identifier
naming a predicate, and <span class="schemevariable">r</span> is an optionally-renamed identifier.</p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/typed)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/typed)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/typed)" class="schemesyntaxlink">require/typed</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">r</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">m</span><span class="schemeparen">)</span></p></td></tr><tr><td><p><span class="schemeparen">(</span><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/typed)" class="schemesyntaxlink">require/typed</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">m</span><span class="hspace">&nbsp;</span><span class="schemeparen">[</span><span class="schemevariable">r</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/opaque-type)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/opaque-type)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require/opaque-type)" class="schemesyntaxlink">require/opaque-type</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="hspace">&nbsp;</span><span class="schemevariable">pred</span><span class="hspace">&nbsp;</span><span class="schemevariable">m</span><span class="schemeparen">)</span></p></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><p><span class="schemeparen">(</span><a name="(def ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require-typed-struct)"></a><a name="(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require-typed-struct)"></a><span class="schemesymbol"><a href="index.html#(form ::/home/samth/work/typed-scheme/doc/../private/prims.ss::require-typed-struct)" class="schemesyntaxlink">require-typed-struct</a></span><span class="hspace">&nbsp;</span><span class="schemevariable">name</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">[</span><span class="schemevariable">f</span><span class="hspace">&nbsp;</span><span class="schemevariable">:</span><span class="hspace">&nbsp;</span><span class="schemevariable">t</span><span class="schemeparen">]</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">m</span><span class="schemeparen">)</span></p></td></tr></table></p><h3>5<tt>&nbsp;</tt><a name="(part lang-level)"></a>The Typed Scheme Language Level</h3><p>In addition to providing a language to be used with PLT Scheme
modules, Typed Scheme is also available as a language selection within
DrScheme.  To enable this language, simply choose it in the "Choose
Language" dialog found in the "Language" menu of DrScheme.  Typed
Scheme programs can then be entered in the definitions window, and
executed with the run button.</p></div></div></body></html>